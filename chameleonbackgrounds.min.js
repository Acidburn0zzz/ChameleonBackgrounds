/*
  Author: Lennart van Ballegoij (https://webverder.nl)
  Repo: https://github.com/WebVerder/ChameleonBackgrounds
  Version: 1.0.0
*/
var ChameleonBackgrounds=function(a){a?this.options=a:this.options=this.getDefaults(),this.bodyReplaced=!1,this.elementAddon="body";var b=$(this.options.element);b.is("body")||(this.elementAddon=this.randomElementName()),this.createBackgroundLoader()};ChameleonBackgrounds.prototype={getDefaults:function(){var a={element:"body",type:"single",src:"http://placehold.it/1920x1080",overlayColor:"#0f1e25",transition_duration:2e3,slider_duration:8e3,slider_loop:!1};return a},randomElementName:function(){for(var a="",b="abcdefghijklmnopqrstuvwxyz",c=0;c<3;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a},createBackgroundLoader:function(){var a=this,b=$(this.options.element);bodyContent=b.html(),duration=this.options.transition_duration/1e3,elementaddon=this.elementAddon,overlayImage=this.options.overlayImage,overlayImage&&(overlayImage="url("+this.options.overlayImage+")"),b.is("body")?position="fixed":position="absolute",loaderStyles="<style> "+this.options.element+"{ position: relative; } #cbg_inner_"+elementaddon+"{ z-index: 2; position: relative; } .cbg-loader."+elementaddon+"{ height: 100%; width: 100%; position: "+position+"; background-image:"+overlayImage+"; background-color: "+this.options.overlayColor+"; opacity: 1; z-index: 1; transition-duration: "+duration+"s; -webkit-transition-duration: "+duration+"s; /* Safari */ top: 0; left: 0; } </style>",$(this.options.element+" .cbg-loader").length?$(window).on("load",function(){a.retrieveBackground()}):(b.html(loaderStyles+'<div id="cbg_inner_'+elementaddon+'">'+bodyContent+'</div><div class="cbg-loader '+elementaddon+'"></div>'),b.is("body")||$(window).on("load",function(){a.retrieveBackground()}),this.bodyReplaced=!0)},loadBackground:function(a){if(a)var b=a;else var b=this.options.src;var c=this,d=this.options.element,e=this.options.minOverlay,f=this.options.type,g=this.elementAddon;e||(e="0"),$("<img/>").attr("src",b).on("load",function(){$(this).remove(),$(d).css("background-image","url("+b+")"),$(d+" .cbg-loader."+g).css("opacity",e),"slider"==f&&c.loadBackgroundSlider(1)})},reloadBackground:function(a){function f(){$("<img/>").attr("src",b).on("load",function(){$(this).remove(),$(c).css("background-image","url("+b+")"),$(c+" .cbg-loader."+e).css("opacity",d)})}if(a)var b=a;else var b=this.options.src;var c=this.options.element,d=this.options.minOverlay,e=this.elementAddon;d||(d="0"),$(c+" .cbg-loader").css("opacity","1"),setTimeout(function(){f()},this.options.transition_duration)},loadBackgroundSlider:function(a){var b=this.options.src,c=this.options.slider_duration+2*this.options.transition_duration,d=this.options.slider_loop,e=this,f=!1;0==a?f||(this.loadBackground(b[a]),a++):setInterval(function(){var c=!1;"reloop"===a&&(c=!0,a=0);var f=b[a];0==a?c&&e.reloadBackground(f):e.reloadBackground(f),a++,a==b.length&&(d?a="reloop":clearInterval(run))},c)},retrieveBackground:function(){var a=this.options.type;"single"==a?this.loadBackground():"slider"==a&&this.loadBackgroundSlider(0)},constructor:ChameleonBackgrounds};
